# 20260124-小红书发布流程全站实现

## 解决的问题
为 Memoraid 扩展了小红书（Xiaohongshu）平台的自动化发布能力，实现了从网页内容抓取 -> AI 生成 -> 自动填充发布的一站式流程。

## 实现的功能
1.  **自动填充脚本**: 支持填充标题、正文（处理 Markdown）、自动点击一键排版。
2.  **发布交互**: 自动处理“下一步”、选择封面模板、检测并点击推荐话题、勾选“我已阅读...”。
3.  **配置系统**: 在设置中添加了小红书专属配置项，支持 Cookie 自动同步和自定义提示词。
4.  **UI 集成**: 在主面板和结果面板增加了小红书发布入口。
5.  **Cookie 同步**: 后台监听支持小红书域名，确保发布时 Cookie 处于最新状态。

## 技术细节
*   **Selectors**: 基于小红书创作者平台（Playwright 录制版）定义的 CSS 选择器。
*   **Markdown 处理**: 自研 Markdown 转换逻辑，保留基本的换行和层级感（小红书编辑器限制较多）。
*   **发布状态流**: 使用 `pending_xiaohongshu_publish` storage 键值在 background 和 content script 之间同步文章数据。

## 使用说明
1.  进入插件设置，确保小红书 Cookie 已同步（或点击自动同步）。
2.  在任意技术文章页面，点击插件主面板的“小红书”按钮。
3.  插件将自动抓取、生成并跳转至小红书发布页。
4.  自动填充完成后，点击小红书页面的“发布”按钮即可。

## 下一步优化建议
*   **多图支持**: 目前主要支持单图/模板封面，未来可以支持抓取来源页面的多图并自动上传。
*   **话题优化**: 增加基于 AI 提取的自定义话题填充功能。
*   **防封增强**: 加入更多的随机延时模拟人工操作。
